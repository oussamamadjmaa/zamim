import{a as U,u as j,_ as A,j as o,m as n,l as t,q as y,J as B,K as e,t as h,F as b,A as g,s as m,r as w,b as P,x as l,C as N,v as T,g as q,i as k,k as F}from"./common-00698841.js";window.axios=U;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const H={rtl:document.querySelector("body").classList.contains("rtl"),position:document.querySelector("body").classList.contains("rtl")?"top-left":"top-right",transition:"Vue-Toastification__bounce",maxToasts:20,newestOnTop:!0,timeout:2300};window.toast=j(H);const R={},V={class:"table-responsive"},z={class:"table table-borderless"};function D(c,s){return o(),n("div",V,[t("table",z,[t("thead",null,[y(c.$slots,"thead")]),t("tbody",null,[y(c.$slots,"default")])])])}const ne=A(R,[["render",D]]),E={class:"bg-white border rounded-16 py-5 px-4 h-100 position-relative"},I={key:0},O={__name:"MainCardComponent",setup(c){const s=B();return(i,d)=>(o(),n("div",E,[e(s).header?(o(),n("div",I,[y(i.$slots,"header")])):h("",!0),t("div",null,[y(i.$slots,"default")])]))}},J={key:0,"aria-label":"..."},X={class:"pagination"},K=["onClick","innerHTML"],W=["innerHTML"],Z={__name:"MainPaginationComponent",props:{meta:Array|Object},setup(c){return(s,i)=>c.meta.last_page!=1?(o(),n("nav",J,[t("ul",X,[(o(!0),n(b,null,g(c.meta.links,d=>(o(),n("li",{class:m(["page-item",{disabled:!d.url,active:d.active}])},[d.url&&!d.active?(o(),n("a",{key:0,class:"page-link",href:"javascript:;",onClick:v=>s.$emit("updateList",d.url),innerHTML:d.label},null,8,K)):(o(),n("span",{key:1,class:"page-link",innerHTML:d.label},null,8,W))],2))),256))])])):h("",!0)}},G=["textContent"],Q={key:1},Y={key:0,class:"dropdown"},tt=["textContent"],et={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},st=["onClick","textContent"],ot={key:0,class:"p5"},nt={key:1,class:"text-center"},at=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),it=[at],lt=["textContent"],dt={key:3,class:"chartjs-bar"},rt={class:"chartjs-bar__container"},ct=["id"],pt={key:4,class:"is-proccessing"},_t=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),ut=[_t],ae={__name:"ChartJsComponent",props:{title:{type:String,required:!0},stats_url:{type:String,required:!0},period:{type:String,default:"last_week"},type:{type:String,default:"bar"},version:{type:Number,default:1},box:{type:Boolean,default:!0}},setup(c){const s=c,{makeFetchAllRef:i,fetchAll:d}=N(),v=w(s.period),r=s.stats_url,a=i(),_=async(p=null)=>{p=p??r.replace("periodValue",v.value),p=new URL(p),p.searchParams.append("type",s.type),p.searchParams.append("version",s.version),await d(p,a),a.value.response.status==200&&a.value.response.data&&a.value.response.data.chartData&&M()},u=w(null),M=()=>{const p=document.getElementById(a.value.response.data.id);u.value&&u.value.destroy();let x;s.type=="line"?x={responsive:!0,plugins:{legend:{position:"top",align:"start",display:!1}},scales:{y:{position:"right",beginAtZero:s.version!=1,border:{color:"#0864AF",width:s.version==1?3:0,z:1},ticks:{display:s.version!=1,min:1,callback:function(f,$,C){return f%1===0?f:""},font:{family:"Tajawal"}},clip:!1},x:{reverse:!0,border:{color:"#0864AF",width:s.version==1?3:0,z:1},ticks:{display:s.version!=1,font:{family:"Tajawal"}},grid:{display:!1}}},layout:{direction:"rtl",padding:{left:18}}}:x={responsive:!0,plugins:{legend:{position:"top",align:"start",display:!1}},scales:{y:{position:"right",ticks:{min:1,callback:function(f,$,C){return f%1===0?f:""},font:{family:"Tajawal"}},border:{width:0},clip:!1},x:{reverse:!0,offset:!0,border:{width:0},grid:{display:!1},ticks:{font:{family:"Tajawal"}}}},layout:{direction:"rtl"}},u.value=new Chart(p,{type:s.type,data:a.value.response.data.chartData,options:x})},S=p=>{v.value=p,_(r.replace("periodValue",p))};return P(async()=>{await _()}),(p,x)=>(o(),n("div",{class:m({"bg-white border rounded-16 py-4 px-4 h-100 position-relative":s.box})},[t("div",{class:m({"d-flex flex-wrap justify-content-between":s.box})},[s.box?(o(),n("h6",{key:0,class:"h7",textContent:l(c.title)},null,8,G)):h("",!0),e(a).response&&e(a).response.data&&e(a).response.data.periods?(o(),n("div",Q,[s.box?(o(),n("div",Y,[t("p",{class:"dropdown-toggle",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",textContent:l(e(a).response.data.periods[v.value])},null,8,tt),t("ul",et,[(o(!0),n(b,null,g(e(a).response.data.periods,(f,$)=>(o(),n("li",null,[t("a",{class:"dropdown-item",href:"javascript:;",onClick:C=>S($),textContent:l(f)},null,8,st)]))),256))])])):h("",!0)])):h("",!0)],2),s.box?(o(),n("p",ot,"لوريم ايبسوم هو نموذج افتراضي يوضع في التصاميم لتعرض على العميل .")):h("",!0),e(a).response?e(a).response.status!=200?(o(),n("div",{key:2,class:"text-center text-danger",textContent:l(e(a).response.data.message||e(a).response.statusText)},null,8,lt)):(o(),n("div",dt,[t("div",rt,[t("canvas",{id:e(a).response.data.id,height:"140"},null,8,ct)])])):(o(),n("div",nt,it)),e(a).isProccessing&&e(a).response?(o(),n("div",pt,ut)):h("",!0)],2))}};function L(){const{callApi:c}=N(),s=w({isProccessing:!0,response:null,data:[]}),i=async(r=null)=>{r=new URL(r??window._app.notificationsRoute),r.searchParams.append("timestamp",new Date().getTime()),r=r.href,s.value.isProccessing=!0;const a=s.value.response=await c({url:r});return s.value.isProccessing=!1,a.status==200&&(s.value.data=a.data),a.data.data},d=r=>window._app.notificationUrl.replace("notificationId",r.id),v=window._app.notificationsRoute.replace("stats","");return{notifications:s,getNotifications:i,notificationUrl:d,notificationsUrl:v}}const ht={class:"notifications-dropdown"},vt={class:"dropdown"},ft=["title"],mt=t("ion-icon",{name:"notifications-outline",style:{"font-size":"21px"}},null,-1),bt=["data-count"],xt={class:"count"},yt=["textContent"],gt={class:"dropdown-menu dropdown-menu-lg dropdown-menu-end p-0","aria-labelledby":"page-header-notifications-dropdown"},$t={class:"pushNotifications__"},wt={key:0,class:"text-center"},Ct=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),kt=[Ct],Nt=["textContent"],Tt={key:2,class:"text-center py-3"},Lt=["href"],Mt={class:"flex-1 px-3"},St=["textContent"],Ut={class:"font-size-12 text-muted"},jt=["textContent"],At=["textContent"],Bt={class:"p-2 d-grid border-top"},Pt=["href"],qt=t("i",{class:"mdi mdi-bell"},null,-1),ie={__name:"NavbarNotificationsComponent",setup(c){const{getNotifications:s,notifications:i,notificationUrl:d,notificationsUrl:v}=L(),r=a=>{a.classList.contains("show")&&s()};return setTimeout(()=>{s()},100),setInterval(()=>{s()},1e4),(a,_)=>(o(),n("div",ht,[t("div",vt,[t("button",{type:"button",title:a.trans("Notifications"),class:"btn btn-transparent position-relative","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",onClick:_[0]||(_[0]=u=>r(u.delegateTarget))},[mt,e(i).data.unreadCount>0?(o(),n("span",{key:0,class:"position-absolute start-0 translate-middle badge rounded-pill bg-danger","data-count":e(i).data.unreadCount,style:{top:"5px"}},[t("span",xt,l(e(i).data.unreadCount),1),t("span",{class:"visually-hidden",textContent:l(a.trans("Unseen Notifications"))},null,8,yt)],8,bt)):h("",!0)],8,ft),t("div",gt,[t("div",$t,[e(i).response?e(i).response.status!=200?(o(),n("div",{key:1,class:"text-center text-danger",textContent:l(e(i).response.data.message||e(i).response.statusText)},null,8,Nt)):e(i).data.data.length==0?(o(),n("div",Tt,l(a.trans("No Notifications")),1)):(o(!0),n(b,{key:3},g(e(i).data.data,u=>(o(),n("a",{href:e(d)(u),class:"text-reset notification-item"},[t("div",{class:m(["py-3 border-bottom",{"bg-light":!u.readAt}]),style:{"border-color":"#bababa6b!important"}},[t("div",Mt,[t("h6",{class:"mb-1",textContent:l(u.title)},null,8,St),t("div",Ut,[t("small",{class:"d-block text-dark",textContent:l(u.description)},null,8,jt),t("small",{textContent:l(u.createdAtForHumans)},null,8,At)])])],2)],8,Lt))),256)):(o(),n("div",wt,kt))]),t("div",Bt,[t("a",{class:"font-size-14 text-center",href:e(v)},[qt,T(" "+l(a.trans("Show all")),1)],8,Pt)])])])]))}},Ft={class:"d-flex justify-content-between align-items-center flex-wrap"},Ht={class:"d-flex mb-3 mb-md-0"},Rt={class:"d-flex flex-wrap"},Vt={class:"mb-0"},zt=t("i",{class:"bi bi-bell"},null,-1),Dt={class:"actions flex-grow"};const Et={key:0,class:"text-center"},It=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),Ot=[It],Jt=["textContent"],Xt={key:2,class:"text-center"},Kt={class:"mb-4"},Wt=["href"],Zt={class:"notification-body__ ms-2"},Gt=["textContent"],Qt=["textContent"],Yt=["textContent"],te={key:4,class:"is-proccessing"},ee=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),se=[ee],le={__name:"NotificationsComponent",setup(c){const{getNotifications:s,notifications:i,notificationUrl:d,notificationsUrl:v}=L();return setTimeout(()=>{s()},100),(r,a)=>(o(),q(O,{class:m({"mt-5":!0})},{header:k(()=>[t("div",Ft,[t("div",Ht,[t("div",Rt,[t("h5",Vt,[zt,T(" "+l(r.trans("Notifications")),1)])])]),t("div",Dt,[h("",!0)])])]),default:k(()=>[t("div",null,[e(i).response?e(i).response.status!=200?(o(),n("div",{key:1,class:"text-center text-danger",textContent:l(e(i).response.data.message||e(i).response.statusText)},null,8,Jt)):e(i).data.data.length==0?(o(),n("div",Xt,l(r.trans("No Notifications")),1)):(o(),n(b,{key:3},[t("div",Kt,[(o(!0),n(b,null,g(e(i).data.data,_=>(o(),n("a",{href:e(d)(_),class:"col-12 px-0 d-block text-dark"},[t("div",{class:m(["notification-item___ d-flex py-3 px-3 border-bottom",{"bg-light":!_.readAt}]),style:{"border-color":"#bababa6b!important"}},[t("div",Zt,[t("h5",{textContent:l(_.title)},null,8,Gt),t("small",{class:"mb-0 d-block",textContent:l(_.description)},null,8,Qt),t("small",{class:"text-secondary mb-0",textContent:l(_.createdAtForHumans)},null,8,Yt)])],2)],8,Wt))),256))]),F(Z,{meta:e(i).response.data.meta,onUpdateList:e(s)},null,8,["meta","onUpdateList"])],64)):(o(),n("div",Et,Ot)),e(i).isProccessing&&e(i).response?(o(),n("div",te,se)):h("",!0)])]),_:1}))}};export{ne as M,O as _,Z as a,ae as b,ie as c,le as d};
