import{_ as k,M as S,a as T,b as P,c as U,d as D}from"./NotificationsComponent-ff8ff7fd.js";import{b as $,r as N,g as f,i as v,C as w,j as s,l as t,x as e,m as n,t as r,K as a,k as A,F as x,A as B,s as j,E,G as F}from"./common-e8678646.js";const L={class:"d-flex flex-wrap justify-content-between"},M=["textContent"],R=["placeholder"],V={key:0,class:"text-end"},I=t("p",{class:"p5 mb-4"},"لوريم ايبسوم هو نموذج افتراضي يوضع في التصاميم لتعرض على العميل .",-1),K={key:0,class:"text-center"},O=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),z=[O],G=["textContent"],H={key:2,class:"text-center"},W=t("th",null,"#",-1),q={scope:"col"},J={scope:"col"},Q={scope:"col"},X={scope:"col"},Y={scope:"col"},Z={scope:"col"},tt={scope:"col"},et=["textContent"],st=["textContent"],nt=["textContent"],ot=["textContent"],at=["textContent"],it=["textContent"],lt=["textContent"],ct=["href","textContent"],rt={key:4,class:"is-proccessing"},dt=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),pt=[dt],_t={__name:"SubscriptionsComponent",props:{without_pagination:{default:!1,type:Boolean}},setup(y){const i=y,{makeFetchAllRef:g,fetchAll:C}=w(),d=`${window._app.url}/subscriptions/all`,p=`${window._app.url}/subscriptions/payments_history`,l=g();l.value.without_pagination=i.without_pagination;const o=async(c=null)=>{await C(c??d,l)};$(()=>{o()});const m=N(null),_=c=>{m.value&&clearTimeout(m.value),l.value.search=c.target.value,m.value=setTimeout(()=>{o()},600)};return(c,b)=>(s(),f(k,null,{header:v(()=>[t("div",L,[t("h6",{class:"h7",textContent:e(c.trans("Subscriptions"))},null,8,M),t("input",{type:"text",class:"form-control",style:{"max-width":"300px"},placeholder:c.trans("Search"),onKeyup:b[0]||(b[0]=u=>_(u))},null,40,R),i.without_pagination?(s(),n("div",V,[t("a",{href:d,class:"primary-button"},e(c.trans("Show more")),1)])):r("",!0)]),I]),default:v(()=>[t("div",null,[a(l).response?a(l).response.status!=200?(s(),n("div",{key:1,class:"text-center text-danger",textContent:e(a(l).response.data.message||a(l).response.statusText)},null,8,G)):a(l).list.length==0?(s(),n("div",H,e(c.trans("No Data")),1)):(s(),n(x,{key:3},[A(S,null,{thead:v(()=>[t("tr",null,[W,t("th",q,e(c.trans("School id")),1),t("th",J,e(c.trans("School name")),1),t("th",Q,e(c.trans("Subscription plan")),1),t("th",X,e(c.trans("Subscription status")),1),t("th",Y,e(c.trans("Subscription date")),1),t("th",Z,e(c.trans("Subscription ends at")),1),t("th",tt,e(c.trans("Subscription details")),1)])]),default:v(()=>[(s(!0),n(x,null,B(a(l).list,u=>(s(),n("tr",null,[t("td",{scope:"row",textContent:e(u.id)},null,8,et),t("td",{textContent:e(u.subscriber.id)},null,8,st),t("td",{textContent:e(u.subscriber.name)},null,8,nt),t("td",{textContent:e(u.plan.name)},null,8,ot),t("td",null,[t("span",{class:j(["badge",`bg-${u.status}`]),textContent:e(u.statusText)},null,10,at)]),t("td",{class:"text-primary",textContent:e(u.startedAt)},null,8,it),t("td",{class:"text-warning",textContent:e(u.endsAt)},null,8,lt),t("td",null,[t("a",{target:"_blank",href:p+"/"+u.subscriberId,textContent:e(c.trans("Show"))},null,8,ct)])]))),256))]),_:1}),a(l).response.data.meta?(s(),f(T,{key:0,meta:a(l).response.data.meta,onUpdateList:o},null,8,["meta"])):r("",!0)],64)):(s(),n("div",K,z)),a(l).isProccessing&&a(l).response?(s(),n("div",rt,pt)):r("",!0)])]),_:1}))}},ut={class:"d-flex flex-wrap justify-content-between"},ht=["textContent"],mt={key:0,class:"text-end"},vt=t("p",{class:"p5 mb-4"},"لوريم ايبسوم هو نموذج افتراضي يوضع في التصاميم لتعرض على العميل .",-1),yt={key:0,class:"text-center"},gt=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),Ct=[gt],ft=["textContent"],xt={key:2,class:"text-center"},$t=t("th",null,"#",-1),wt={scope:"col"},bt={key:0,scope:"col"},kt={scope:"col"},St={key:1,scope:"col"},Tt={key:2,scope:"col"},At={scope:"col"},Bt={scope:"col"},jt={key:3,scope:"col"},Ft={key:4,scope:"col"},Pt=["textContent"],Ut=["textContent"],Dt=["textContent"],Nt=["href","textContent"],Et=["textContent"],Lt=["textContent"],Mt=["textContent"],Rt=["textContent"],Vt=["textContent"],It={key:4,class:"is-proccessing"},Kt=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),Ot=[Kt],zt={__name:"SubscriptionPaymentsComponent",props:{without_pagination:{type:Boolean,default:!1},school:{type:Object,default:null}},setup(y){const i=y,{makeFetchAllRef:g,fetchAll:C}=w(),d=`${window._app.url}/subscriptions/payments_history`,p=g();p.value.without_pagination=i.without_pagination;const l=async(o=null)=>{await C(o??d+(i.school?"/"+i.school.id:""),p)};return $(()=>{l()}),(o,m)=>(s(),f(k,null,{header:v(()=>[t("div",ut,[t("h6",{class:"h7",textContent:e(o.trans("Payments history"))},null,8,ht),i.without_pagination?(s(),n("div",mt,[t("a",{href:d,class:"primary-button"},e(o.trans("Show more")),1)])):r("",!0)]),vt]),default:v(()=>[t("div",null,[a(p).response?a(p).response.status!=200?(s(),n("div",{key:1,class:"text-center text-danger",textContent:e(a(p).response.data.message||a(p).response.statusText)},null,8,ft)):a(p).list.length==0?(s(),n("div",xt,e(o.trans("No Data")),1)):(s(),n(x,{key:3},[A(S,null,{thead:v(()=>[t("tr",null,[$t,t("th",wt,e(o.trans("Plan name")),1),i.without_pagination?r("",!0):(s(),n("th",bt,e(o.trans("School id")),1)),t("th",kt,e(o.trans("School name")),1),i.without_pagination?r("",!0):(s(),n("th",St,e(o.trans("Payment method")),1)),i.without_pagination?r("",!0):(s(),n("th",Tt,e(o.trans("Period")),1)),t("th",At,e(o.trans("Amount")),1),t("th",Bt,e(o.trans("Payment status")),1),i.without_pagination?r("",!0):(s(),n("th",jt,e(o.trans("Last update")),1)),i.without_pagination?r("",!0):(s(),n("th",Ft,e(o.trans("Comment")),1))])]),default:v(()=>[(s(!0),n(x,null,B(a(p).list,_=>(s(),n("tr",null,[t("td",{scope:"row",textContent:e(_.id)},null,8,Pt),t("td",{textContent:e(o.trans(_.plan.name))},null,8,Ut),i.without_pagination?r("",!0):(s(),n("td",{key:0,textContent:e(_.payer.id)},null,8,Dt)),t("td",null,[t("a",{href:d+"/"+_.payer.id,textContent:e(_.payer.name)},null,8,Nt)]),i.without_pagination?r("",!0):(s(),n("td",{key:1,textContent:e(o.trans(_.paymentMethodText))},null,8,Et)),i.without_pagination?r("",!0):(s(),n("td",{key:2,textContent:e(_.subscriptionPeriodText)},null,8,Lt)),t("td",null,e(_.amount+" "+o.trans(_.currencyText)),1),t("td",null,[t("span",{class:j(["badge","bg-"+_.status]),textContent:e(o.trans(_.statusText))},null,10,Mt)]),i.without_pagination?r("",!0):(s(),n("td",{key:3,textContent:e(_.updatedAt)},null,8,Rt)),i.without_pagination?r("",!0):(s(),n("td",{key:4,style:{"white-space":"pre-wrap"},textContent:e(_.comment??"/")},null,8,Vt))]))),256))]),_:1}),a(p).response.data.meta?(s(),f(T,{key:0,meta:a(p).response.data.meta,onUpdateList:l},null,8,["meta"])):r("",!0)],64)):(s(),n("div",yt,Ct)),a(p).isProccessing&&a(p).response?(s(),n("div",It,Ot)):r("",!0)])]),_:1}))}},Gt={class:"bg-white border rounded-16 py-4 px-4 h-100"},Ht=["textContent"],Wt=t("p",{class:"p5"},"لوريم ايبسوم هو نموذج افتراضي يوضع في التصاميم لتعرض على العميل .",-1),qt={key:0,class:"text-center"},Jt=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),Qt=[Jt],Xt=["textContent"],Yt={key:2,class:"active-radios-chart"},Zt=t("div",{class:"active-radios-chart__container"},[t("canvas",{id:"SubscriptionsStatsByPlan",height:"140"})],-1),te=[Zt],ee={key:3,class:"is-proccessing"},se=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),ne=[se],oe={__name:"SubscriptionsStatsByPlanComponent",setup(y){const{makeFetchAllRef:i,fetchAll:g}=w(),C=`${window._app.url}/subscriptions/stats/plans-subsribers`,d=i(),p=async(o=null)=>{await g(o??C,d)},l=()=>{const o=document.getElementById("SubscriptionsStatsByPlan");new Chart(o,{type:"bar",data:{labels:d.value.list.labels,datasets:[{label:"عدد المشتركين",data:d.value.list.data,borderColor:"transparent",backgroundColor:["#0864AF","#D95D13"],borderRadius:12,barPercentage:.2,offset:!0,rtl:!0}]},options:{responsive:!0,plugins:{legend:{position:"top",align:"start",display:!1}},scales:{y:{position:"right",ticks:{min:1,callback:function(m,_,c){return m%1===0?m:""},font:{family:"Tajawal"}},border:{width:0},clip:!1},x:{reverse:!0,offset:!0,border:{width:0},grid:{display:!1},ticks:{font:{family:"Tajawal"}}}},layout:{direction:"rtl"}}})};return $(async()=>{await p(),l()}),(o,m)=>(s(),n("div",Gt,[t("div",null,[t("h6",{class:"h7",textContent:e(o.trans("Subscription plan"))},null,8,Ht)]),Wt,a(d).response?a(d).response.status!=200?(s(),n("div",{key:1,class:"text-center text-danger",textContent:e(a(d).response.data.message||a(d).response.statusText)},null,8,Xt)):(s(),n("div",Yt,te)):(s(),n("div",qt,Qt)),a(d).isProccessing&&a(d).response?(s(),n("div",ee,ne)):r("",!0)]))}},h=E({});h.component("subscriptions-component",_t);h.component("subscription-payments-component",zt);h.component("subscriptions-stats-by-plan-component",oe);h.component("chartjs-component",P);h.component("navbar-notifications-component",U);h.component("notifications-component",D);h.provide("trans",F.translate);h.config.globalProperties.trans=F.translate;h.config.compilerOptions.isCustomElement=y=>y.startsWith("ion-icon");h.mount("#app");
