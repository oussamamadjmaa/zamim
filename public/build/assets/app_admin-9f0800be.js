import{_ as M,a as F,b as j,M as E,c as P,d as I,e as K,f as z}from"./NotificationsComponent-d6fe5fd3.js";import{b as L,r as A,g as R,i as $,B as U,j as o,m as t,t as s,k as i,x as v,J as n,C as f,F as g,l as D,v as T,y as G,z as J,q as Q,H as O,I as B,K as W,E as X,G as q}from"./common-7c3a6321.js";const Y={class:"d-flex flex-wrap justify-content-between mb-4"},Z=["textContent"],tt=["placeholder"],et={key:0,class:"text-end"},nt={key:0,class:"text-center"},st=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),ot=[st],at=["textContent"],lt={key:2,class:"text-center"},it=t("th",null,"#",-1),dt={scope:"col"},rt={scope:"col"},ut={scope:"col"},ct={scope:"col"},mt={scope:"col"},pt={scope:"col"},_t={scope:"col"},ht=["textContent"],vt=["textContent"],yt=["textContent"],bt=["textContent"],Ct=["textContent"],xt=["textContent"],$t=["textContent"],ft=["href","textContent"],wt={key:4,class:"is-proccessing"},kt=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),gt=[kt],St={__name:"SubscriptionsComponent",props:{without_pagination:{default:!1,type:Boolean}},setup(p){const l=p,{makeFetchAllRef:c,fetchAll:w}=U(),y=`${window._app.url}/subscriptions/all`,b=`${window._app.url}/subscriptions/payments_history`,e=c();e.value.without_pagination=l.without_pagination;const _=async(a=null)=>{await w(a??y,e)};L(()=>{_()});const C=A(null),k=a=>{C.value&&clearTimeout(C.value),e.value.search=a.target.value,C.value=setTimeout(()=>{_()},600)};return(a,x)=>(o(),R(M,null,{header:$(()=>[t("div",Y,[t("h6",{class:"h7",textContent:s(a.trans("Subscriptions"))},null,8,Z),t("input",{type:"text",class:"form-control mb-2",style:{"max-width":"300px"},placeholder:a.trans("Search"),onKeyup:x[0]||(x[0]=d=>k(d))},null,40,tt),l.without_pagination?(o(),i("div",et,[t("a",{href:y,class:"primary-button"},s(a.trans("Show more")),1)])):v("",!0)])]),default:$(()=>[t("div",null,[n(e).response?n(e).response.status!=200?(o(),i("div",{key:1,class:"text-center text-danger",textContent:s(n(e).response.data.message||n(e).response.statusText)},null,8,at)):n(e).list.length==0?(o(),i("div",lt,s(a.trans("No Data")),1)):(o(),i(g,{key:3},[f(F,null,{thead:$(()=>[t("tr",null,[it,t("th",dt,s(a.trans("School id")),1),t("th",rt,s(a.trans("School name")),1),t("th",ut,s(a.trans("Subscription plan")),1),t("th",ct,s(a.trans("Subscription status")),1),t("th",mt,s(a.trans("Subscription date")),1),t("th",pt,s(a.trans("Subscription ends at")),1),t("th",_t,s(a.trans("Subscription details")),1)])]),default:$(()=>[(o(!0),i(g,null,D(n(e).list,d=>(o(),i("tr",{key:d.id},[t("td",{scope:"row",textContent:s(d.id)},null,8,ht),t("td",{textContent:s(d.subscriber.id)},null,8,vt),t("td",{textContent:s(d.subscriber.name)},null,8,yt),t("td",{textContent:s(d.plan.name)},null,8,bt),t("td",null,[t("span",{class:T(["badge",`bg-${d.status}`]),textContent:s(d.statusText)},null,10,Ct)]),t("td",{class:"text-primary",textContent:s(d.startedAt)},null,8,xt),t("td",{class:"text-warning",textContent:s(d.endsAt)},null,8,$t),t("td",null,[t("a",{target:"_blank",href:b+"/subscriber/"+d.subscriberId,textContent:s(a.trans("Show"))},null,8,ft)])]))),128))]),_:1}),n(e).response.data.meta?(o(),R(j,{key:0,meta:n(e).response.data.meta,onUpdateList:_},null,8,["meta"])):v("",!0)],64)):(o(),i("div",nt,ot)),n(e).isProccessing&&n(e).response?(o(),i("div",wt,gt)):v("",!0)])]),_:1}))}},Pt={class:"p-3"},Tt=["textContent"],Vt=t("td",null,"ID",-1),At=["textContent"],Rt=["textContent"],Ut=["textContent"],Dt=["textContent"],Ft=["textContent"],Mt=["textContent"],jt=["textContent"],Et=["textContent"],Lt=["textContent"],Ot=["textContent"],Bt=["textContent"],Wt=["textContent"],qt=["textContent"],Nt={key:0},Ht=["textContent"],It=["textContent"],Kt={key:1},zt=["textContent"],Gt=["textContent"],Jt={key:2},Qt=["textContent"],Xt=["textContent"],Yt={key:3},Zt=["textContent"],te=["textContent"],ee={key:4},ne=["textContent"],se=["textContent"],oe={key:5},ae=["textContent"],le=["textContent"],ie={key:6},de=["textContent"],re=["href"],ue=["src","alt"],ce={key:0,class:"mt-3 mb-4 text-center"},me=["textContent"],pe=["textContent"],_e={class:"p-3"},he={class:"mb-3"},ve=["textContent"],ye=["disabled","textContent"],be=["disabled","textContent"],Ce=["disabled","textContent"],xe={__name:"SubscriptionPaymentReviewComponent",props:{subscriptionPayment:Array|Object},emits:["updateSubscriptionPayment"],setup(p,{emit:l}){const c=p,w=l,{callApi:y}=U(),b=A(null),e=A(!1),_=A(null),C=()=>{e.value||(b.value=_.value=null)},k=async()=>{e.value=!0;const a=await y({url:`/subscriptions/payments_history/${c.subscriptionPayment.id}/${b.value}`,method:"POST",data:{comment:_.value,_method:"PUT"}});e.value=!1,a.status==200&&(w("updateSubscriptionPayment",a.data.data),C())};return(a,x)=>(o(),i("div",Pt,[t("h4",{textContent:s(a.trans("Subscription payment details"))},null,8,Tt),f(F,{class:T({"fd-bold":!0})},{default:$(()=>[t("tr",null,[Vt,t("td",{textContent:s(p.subscriptionPayment.id)},null,8,At)]),t("tr",null,[t("td",{textContent:s(a.trans("Payment method"))},null,8,Rt),t("td",{textContent:s(p.subscriptionPayment.paymentMethodText)},null,8,Ut)]),t("tr",null,[t("td",{textContent:s(a.trans("Plan name"))},null,8,Dt),t("td",{textContent:s(p.subscriptionPayment.plan.name)},null,8,Ft)]),t("tr",null,[t("td",{textContent:s(a.trans("Period"))},null,8,Mt),t("td",{textContent:s(p.subscriptionPayment.subscriptionPeriodText)},null,8,jt)]),t("tr",null,[t("td",{textContent:s(a.trans("Amount"))},null,8,Et),t("td",{textContent:s(p.subscriptionPayment.amount+" "+a.trans(p.subscriptionPayment.currency))},null,8,Lt)]),t("tr",null,[t("td",{textContent:s(a.trans("Date"))},null,8,Ot),t("td",{textContent:s(p.subscriptionPayment.initiatedAt)},null,8,Bt)]),t("tr",null,[t("td",{textContent:s(a.trans("Payment status"))},null,8,Wt),t("td",null,[t("span",{class:T(["badge","bg-"+p.subscriptionPayment.status]),textContent:s(a.trans(p.subscriptionPayment.statusText))},null,10,qt)])]),p.subscriptionPayment.status=="on_hold"?(o(),i("tr",Nt,[t("td",{textContent:s(a.trans("Holded at"))},null,8,Ht),t("td",{textContent:s(p.subscriptionPayment.onHoldAt)},null,8,It)])):p.subscriptionPayment.status=="failed"?(o(),i("tr",Kt,[t("td",{textContent:s(a.trans("Failed at"))},null,8,zt),t("td",{textContent:s(p.subscriptionPayment.failedAt)},null,8,Gt)])):p.subscriptionPayment.status=="completed"?(o(),i("tr",Jt,[t("td",{textContent:s(a.trans("Completed at"))},null,8,Qt),t("td",{textContent:s(p.subscriptionPayment.completedAt)},null,8,Xt)])):p.subscriptionPayment.status=="canceled"?(o(),i("tr",Yt,[t("td",{textContent:s(a.trans("Canceled at"))},null,8,Zt),t("td",{textContent:s(p.subscriptionPayment.canceledAt)},null,8,te)])):p.subscriptionPayment.status=="refunded"?(o(),i("tr",ee,[t("td",{textContent:s(a.trans("Refunded at"))},null,8,ne),t("td",{textContent:s(p.subscriptionPayment.refundedAt)},null,8,se)])):v("",!0),p.subscriptionPayment.comment?(o(),i("tr",oe,[t("td",{textContent:s(a.trans("Comment"))},null,8,ae),t("td",{textContent:s(p.subscriptionPayment.comment)},null,8,le)])):v("",!0),p.subscriptionPayment.receipt?(o(),i("tr",ie,[t("td",{textContent:s(a.trans("Payment confirmation receipt"))},null,8,de),t("td",null,[t("a",{href:p.subscriptionPayment.receipt,target:"_blank"},[t("img",{src:p.subscriptionPayment.receipt,alt:a.trans("Payment confirmation receipt"),style:{"max-width":"400px"}},null,8,ue)],8,re)])])):v("",!0)]),_:1}),p.subscriptionPayment.status=="in_review"?(o(),i("div",ce,[t("button",{type:"button",class:"button bg-success d-inline me-2",textContent:s(a.trans("Confirm Payment")),onClick:x[0]||(x[0]=d=>b.value="confirm")},null,8,me),t("button",{type:"button",class:"button bg-danger d-inline",textContent:s(a.trans("Cancel Payment")),onClick:x[1]||(x[1]=d=>b.value="cancel")},null,8,pe)])):v("",!0),b.value||e.value?(o(),R(E,{key:1,class:T({"centered w-500px":!0}),onCloseModal:C},{default:$(()=>[t("div",_e,[t("div",he,[t("label",{class:"form-label",textContent:s(a.trans("Comment"))},null,8,ve),G(t("textarea",{class:"form-control",rows:"2","onUpdate:modelValue":x[2]||(x[2]=d=>_.value=d)},null,512),[[J,_.value]])]),t("button",{type:"button",disabled:e.value,class:"button secondary-button d-inline me-2",textContent:s(a.trans("Close")),onClick:C},null,8,ye),b.value=="confirm"?(o(),i("button",{key:0,onClick:x[3]||(x[3]=d=>k()),type:"button",disabled:e.value,class:"button bg-success",textContent:s(a.trans("Confirm Payment"))},null,8,be)):(o(),i("button",{key:1,onClick:x[4]||(x[4]=d=>k()),type:"button",disabled:e.value,class:"button bg-danger",textContent:s(a.trans("Cancel Payment"))},null,8,Ce))])]),_:1})):v("",!0)]))}},$e={class:"d-flex flex-wrap justify-content-between mb-4"},fe=["textContent"],we={key:0,class:"text-end"},ke={key:0,class:"text-center"},ge=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),Se=[ge],Pe=["textContent"],Te={key:2,class:"text-center"},Ve=t("th",null,"#",-1),Ae={scope:"col"},Re={key:0,scope:"col"},Ue={scope:"col"},De={key:1,scope:"col"},Fe={key:2,scope:"col"},Me={scope:"col"},je={scope:"col"},Ee={key:3,scope:"col"},Le={key:4,scope:"col"},Oe=["textContent"],Be=["textContent"],We=["textContent"],qe=["href","textContent"],Ne=["textContent"],He=["textContent"],Ie=["textContent"],Ke=["textContent"],ze=["onClick","title"],Ge=t("ion-icon",{name:"eye-outline"},null,-1),Je={key:4,class:"is-proccessing"},Qe=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),Xe=[Qe],Ye={__name:"SubscriptionPaymentsComponent",props:{without_pagination:{type:Boolean,default:!1},school:{type:Object,default:null}},setup(p){const l=p,{makeFetchAllRef:c,fetchAll:w,fetchOne:y}=U(),b=`${window._app.url}/subscriptions/payments_history`,e=c();e.value.without_pagination=l.without_pagination;const _=async(d=null)=>{await w(d??b+(l.school?"/subscriber/"+l.school.id:""),e),console.log(e.value)},C=async d=>await y(`${b}/${d}`),k=async d=>{const h=await C(d);h&&(a.value=h)},a=A(null),x=d=>{e.value.list=e.value.list.map(h=>h.id==d.id?d:h),a.value=d};return L(async()=>{_(),l.without_pagination==!0&&setInterval(()=>{_()},10100),window.urlParams.get("payment_id")&&k(window.urlParams.get("payment_id"))}),(d,h)=>(o(),i(g,null,[f(M,null,{header:$(()=>[t("div",$e,[t("h6",{class:"h7",textContent:s(d.trans("Payments history"))},null,8,fe),l.without_pagination?(o(),i("div",we,[t("a",{href:b,class:"primary-button"},s(d.trans("Show more")),1)])):v("",!0)])]),default:$(()=>[t("div",null,[n(e).response?n(e).response.status!=200?(o(),i("div",{key:1,class:"text-center text-danger",textContent:s(n(e).response.data.message||n(e).response.statusText)},null,8,Pe)):n(e).list.length==0?(o(),i("div",Te,s(d.trans("No Data")),1)):(o(),i(g,{key:3},[f(F,null,{thead:$(()=>[t("tr",null,[Ve,t("th",Ae,s(d.trans("Plan name")),1),l.without_pagination?v("",!0):(o(),i("th",Re,s(d.trans("School id")),1)),t("th",Ue,s(d.trans("School name")),1),l.without_pagination?v("",!0):(o(),i("th",De,s(d.trans("Payment method")),1)),l.without_pagination?v("",!0):(o(),i("th",Fe,s(d.trans("Period")),1)),t("th",Me,s(d.trans("Amount")),1),t("th",je,s(d.trans("Payment status")),1),l.without_pagination?v("",!0):(o(),i("th",Ee,s(d.trans("Last update")),1)),l.without_pagination?v("",!0):(o(),i("th",Le,s(d.trans("Operations")),1))])]),default:$(()=>[(o(!0),i(g,null,D(n(e).list,r=>(o(),i("tr",{key:r.id},[t("td",{scope:"row",textContent:s(r.id)},null,8,Oe),t("td",{textContent:s(d.trans(r.plan.name))},null,8,Be),l.without_pagination?v("",!0):(o(),i("td",{key:0,textContent:s(r.payer.id)},null,8,We)),t("td",null,[t("a",{href:b+"/subscriber/"+r.payer.id,textContent:s(r.payer.name)},null,8,qe)]),l.without_pagination?v("",!0):(o(),i("td",{key:1,textContent:s(d.trans(r.paymentMethodText))},null,8,Ne)),l.without_pagination?v("",!0):(o(),i("td",{key:2,textContent:s(r.subscriptionPeriodText)},null,8,He)),t("td",null,s(r.amount+" "+d.trans(r.currencyText)),1),t("td",null,[t("span",{class:T(["badge","bg-"+r.status]),textContent:s(d.trans(r.statusText))},null,10,Ie)]),l.without_pagination?v("",!0):(o(),i("td",{key:3,textContent:s(r.updatedAt)},null,8,Ke)),t("td",null,[t("button",{type:"button",onClick:m=>a.value=r,class:"btn btn-info p-0 px-2 text-white text-nowrap",title:d.trans("Review")},[Ge,Q(" "+s(l.without_pagination?"":d.trans("Review")),1)],8,ze)])]))),128))]),_:1}),n(e).response.data.meta?(o(),R(j,{key:0,meta:n(e).response.data.meta,onUpdateList:_},null,8,["meta"])):v("",!0)],64)):(o(),i("div",ke,Se)),n(e).isProccessing&&n(e).response?(o(),i("div",Je,Xe)):v("",!0)])]),_:1}),a.value?(o(),R(E,{key:0,onCloseModal:h[0]||(h[0]=r=>a.value=null),class:T({"w-800px":!0})},{default:$(()=>[f(xe,{subscriptionPayment:a.value,onUpdateSubscriptionPayment:x},null,8,["subscriptionPayment"])]),_:1})):v("",!0)],64))}},Ze={class:"bg-white border rounded-16 py-4 px-4 h-100"},tn=["textContent"],en=t("p",{class:"p5"},"لوريم ايبسوم هو نموذج افتراضي يوضع في التصاميم لتعرض على العميل .",-1),nn={key:0,class:"text-center"},sn=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),on=[sn],an=["textContent"],ln={key:2,class:"active-radios-chart"},dn=t("div",{class:"active-radios-chart__container"},[t("canvas",{id:"SubscriptionsStatsByPlan",height:"140"})],-1),rn=[dn],un={key:3,class:"is-proccessing"},cn=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),mn=[cn],pn={__name:"SubscriptionsStatsByPlanComponent",setup(p){const{makeFetchAllRef:l,fetchAll:c}=U(),w=`${window._app.url}/subscriptions/stats/plans-subsribers`,y=l(),b=async(_=null)=>{await c(_??w,y)},e=()=>{const _=document.getElementById("SubscriptionsStatsByPlan");new Chart(_,{type:"bar",data:{labels:y.value.list.labels,datasets:[{label:"عدد المشتركين",data:y.value.list.data,borderColor:"transparent",backgroundColor:["#0864AF","#D95D13"],borderRadius:12,barPercentage:.2,offset:!0,rtl:!0}]},options:{responsive:!0,plugins:{legend:{position:"top",align:"start",display:!1}},scales:{y:{position:"right",ticks:{min:1,callback:function(C,k,a){return C%1===0?C:""},font:{family:"Tajawal"}},border:{width:0},clip:!1},x:{reverse:!0,offset:!0,border:{width:0},grid:{display:!1},ticks:{font:{family:"Tajawal"}}}},layout:{direction:"rtl"}}})};return L(async()=>{await b(),e()}),(_,C)=>(o(),i("div",Ze,[t("div",null,[t("h6",{class:"h7",textContent:s(_.trans("Subscription plan"))},null,8,tn)]),en,n(y).response?n(y).response.status!=200?(o(),i("div",{key:1,class:"text-center text-danger",textContent:s(n(y).response.data.message||n(y).response.statusText)},null,8,an)):(o(),i("div",ln,rn)):(o(),i("div",nn,on)),n(y).isProccessing&&n(y).response?(o(),i("div",un,mn)):v("",!0)]))}};function N(){const{callApi:p,fetchAll:l,fetchOne:c,makeFetchAllRef:w,makeFormRef:y,storeForm:b}=U(),e=`${window._app.url}/semesters`,_=w(),C=async(h=null)=>{await l(h??e,_)},k=async h=>await c(`${e}/${h}`),a=y({},e);return{semesters:_,getSemesters:C,getSemester:k,semesterForm:a,storeSemester:async()=>{await b(a,_)},destroySemester:h=>{_.value.list=_.value.list.filter(r=>r!=h),p({url:e+"/"+h.id,method:"POST",data:{_method:"DELETE"}})},pageUrl:e}}const _n={class:"d-flex flex-wrap justify-content-between mb-4"},hn=["textContent"],vn=["placeholder"],yn={class:"text-end"},bn={key:0,class:"text-center"},Cn=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),xn=[Cn],$n=["textContent"],fn={key:2,class:"text-center"},wn=t("th",null,"#",-1),kn=["textContent"],gn=["textContent"],Sn=["textContent"],Pn=["textContent"],Tn={class:"d-flex"},Vn=["onClick"],An=t("ion-icon",{name:"create-outline"},null,-1),Rn=[An],Un=["onClick"],Dn=t("ion-icon",{name:"trash-outline"},null,-1),Fn=[Dn],Mn={key:4,class:"is-proccessing"},jn=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),En=[jn],Ln={class:"p-5 px-4"},On=["textContent"],Bn={class:"row"},Wn={class:"mt-3"},qn=["disabled"],Nn={__name:"SemestersComponent",setup(p){const l=O("trans"),{semesters:c,getSemesters:w,getSemester:y,storeSemester:b,semesterForm:e,destroySemester:_}=N(),C=async()=>{await b(),e.value.response.status==200&&!e.value.update&&(e.value.show=!1)},k=async r=>{c.value.isProccessing=!0,r=await y(r.id),c.value.isProccessing=!1,r&&(c.value.list=c.value.list.map(m=>m.id==r.id?r:m),e.value.show=!0,e.value.data={name:r.name,start_date:r.startDate,end_date:r.endDate},e.value.update=r)},a=()=>{e.value.show=!1,e.value.errors=[]};B(()=>{e.value.show||(e.value.response=null,e.value.errors=[],e.value.update&&(e.value.data=e.value.defaultData,e.value.update=null))});const x=r=>{confirm(l("Do you really want to delete this record?"))&&_(r)};w();const d=A(null),h=r=>{d.value&&clearTimeout(d.value),c.value.search=r.target.value,d.value=setTimeout(()=>{w()},600)};return(r,m)=>(o(),i(g,null,[f(M,null,{header:$(()=>[t("div",_n,[t("h6",{class:"h7",textContent:s(n(l)("Semesters"))},null,8,hn),t("input",{type:"text",class:"form-control mb-2",style:{"max-width":"300px"},placeholder:n(l)("Search"),onKeyup:m[0]||(m[0]=u=>h(u))},null,40,vn),t("div",yn,[t("button",{class:"primary-button",onClick:m[1]||(m[1]=u=>n(e).show=!n(e).show)},s(n(l)("Add new semester")),1)])])]),default:$(()=>[t("div",null,[n(c).response?n(c).response.status!=200?(o(),i("div",{key:1,class:"text-center text-danger",textContent:s(n(c).response.data.message||n(c).response.statusText)},null,8,$n)):n(c).list.length==0?(o(),i("div",fn,s(n(l)("No Data")),1)):(o(),i(g,{key:3},[f(F,null,{thead:$(()=>[t("tr",null,[wn,t("th",null,s(n(l)("Semester name")),1),t("th",null,s(n(l)("Start date")),1),t("th",null,s(n(l)("End date")),1),t("th",null,s(n(l)("Operations")),1)])]),default:$(()=>[(o(!0),i(g,null,D(n(c).list,u=>(o(),i("tr",{key:u.id},[t("td",{scope:"row",textContent:s(u.id)},null,8,kn),t("td",{textContent:s(u.name)},null,8,gn),t("td",{textContent:s(u.startDateFormated)},null,8,Sn),t("td",{textContent:s(u.endDateFormated)},null,8,Pn),t("td",Tn,[t("button",{type:"button",class:"primary-button p-0 px-2 me-2",onClick:V=>k(u)},Rn,8,Vn),t("button",{type:"button",onClick:V=>x(u),class:"button button-red p-0 px-2"},Fn,8,Un)])]))),128))]),_:1}),f(j,{meta:n(c).response.data.meta,onUpdateList:n(w)},null,8,["meta","onUpdateList"])],64)):(o(),i("div",bn,xn)),n(c).isProccessing&&n(c).response?(o(),i("div",Mn,En)):v("",!0)])]),_:1}),n(e).show?(o(),R(E,{key:0,onCloseModal:m[7]||(m[7]=u=>a()),class:T({"w-1000px":!0})},{default:$(()=>[t("div",Ln,[t("form",{onSubmit:m[6]||(m[6]=W(u=>C(),["prevent"]))},[t("h6",{class:"h9 border-bottom pb-3 mb-4",textContent:s(n(l)("Semester information"))},null,8,On),t("div",Bn,[f(P,{errors:n(e).errors.name,label:'<ion-icon name="bookmark"></ion-icon>',placeholder:"Semester name",modelValue:n(e).data.name,"onUpdate:modelValue":m[2]||(m[2]=u=>n(e).data.name=u),required:!0},null,8,["errors","modelValue"]),f(P,{class:"col-md-6",type:"date",errors:n(e).errors.start_date,label:'<ion-icon name="calendar"></ion-icon>',placeholder:"Start date",modelValue:n(e).data.start_date,"onUpdate:modelValue":m[3]||(m[3]=u=>n(e).data.start_date=u),required:!0},null,8,["errors","modelValue"]),f(P,{class:"col-md-6",type:"date",errors:n(e).errors.end_date,label:'<ion-icon name="calendar"></ion-icon>',placeholder:"End date",modelValue:n(e).data.end_date,"onUpdate:modelValue":m[4]||(m[4]=u=>n(e).data.end_date=u),required:!0},null,8,["errors","modelValue"])]),t("div",Wn,[t("button",{type:"submit",class:"primary-button",disabled:n(e).processing},s(n(e).processing?n(l)("Please wait"):n(e).update?n(l)("Update"):n(l)("Save")),9,qn),t("button",{type:"button",class:"secondary-button ms-2",onClick:m[5]||(m[5]=u=>a())},s(n(l)("Close")),1)])],32)])]),_:1})):v("",!0)],64))}};function Hn(){const{callApi:p,fetchAll:l,fetchOne:c,makeFetchAllRef:w,makeFormRef:y,storeForm:b}=U(),e=`${window._app.url}/radio-weeks`,_=w(),C=async(h=null)=>{await l(h??e,_)},k=async h=>await c(`${e}/${h}`),a=y({radios:{Sunday:{},Monday:{},Tuesday:{},Wednesday:{},Thursday:{}}},e);return{radioWeeks:_,getRadioWeeks:C,getRadioWeek:k,radioWeekForm:a,storeRadioWeek:async()=>{await b(a,_)},destroyRadioWeek:h=>{_.value.list=_.value.list.filter(r=>r!=h),p({url:e+"/"+h.id,method:"POST",data:{_method:"DELETE"}})},pageUrl:e}}const In={class:"d-flex flex-wrap justify-content-between mb-4"},Kn=["textContent"],zn={class:"text-end"},Gn={key:0,class:"text-center"},Jn=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),Qn=[Jn],Xn=["textContent"],Yn={key:2,class:"text-center"},Zn=["textContent"],ts=["textContent"],es=["textContent"],ns=["textContent"],ss=["textContent"],os={class:"d-flex"},as=["onClick"],ls=t("ion-icon",{name:"create-outline"},null,-1),is=[ls],ds=["onClick"],rs=t("ion-icon",{name:"trash-outline"},null,-1),us=[rs],cs={key:4,class:"is-proccessing"},ms=t("div",{class:"lds-ellipsis"},[t("div"),t("div"),t("div"),t("div")],-1),ps=[ms],_s={class:"p-5 px-4"},hs=["textContent"],vs={class:"row"},ys={class:"mt-3"},bs=["disabled"],Cs={__name:"RadioWeeksComponent",setup(p){const l=O("trans"),{radioWeeks:c,getRadioWeeks:w,getRadioWeek:y,storeRadioWeek:b,radioWeekForm:e,destroyRadioWeek:_}=Hn(),{semesters:C,getSemesters:k}=N(),a=async()=>{await b(),e.value.response.status==200&&!e.value.update&&(e.value.show=!1)},x=async r=>{c.value.isProccessing=!0,r=await y(r.id),c.value.isProccessing=!1,r&&(c.value.list=c.value.list.map(m=>m.id==r.id?r:m),e.value.show=!0,e.value.data={name:r.name,start_date:r.startDate,end_date:r.endDate},e.value.update=r)},d=()=>{e.value.show=!1,e.value.errors=[]};B(()=>{e.value.show||(e.value.response=null,e.value.errors=[],e.value.update&&(e.value.data=e.value.defaultData,e.value.update=null))});const h=r=>{confirm(l("Do you really want to delete this record?"))&&_(r)};return w(),A(null),C.value.data_type="select",k(),(r,m)=>(o(),i(g,null,[f(M,null,{header:$(()=>[t("div",In,[t("h6",{class:"h7",textContent:s(n(l)("Radio Weeks"))},null,8,Kn),t("div",zn,[t("button",{class:"primary-button",onClick:m[0]||(m[0]=u=>n(e).show=!n(e).show)},s(n(l)("Add radio week")),1)])])]),default:$(()=>[t("div",null,[n(c).response?n(c).response.status!=200?(o(),i("div",{key:1,class:"text-center text-danger",textContent:s(n(c).response.data.message||n(c).response.statusText)},null,8,Xn)):n(c).list.length==0?(o(),i("div",Yn,s(n(l)("No Data")),1)):(o(),i(g,{key:3},[f(F,null,{thead:$(()=>[t("tr",null,[t("th",null,s(n(l)("Semester")),1),t("th",null,s(n(l)("Level")),1),t("th",null,s(n(l)("Week number")),1),t("th",null,s(n(l)("Start date")),1),t("th",null,s(n(l)("End date")),1),t("th",null,s(n(l)("Operations")),1)])]),default:$(()=>[(o(!0),i(g,null,D(n(c).list,u=>(o(),i("tr",{key:u.id},[t("td",{scope:"row",textContent:s(u.semester.name)},null,8,Zn),t("td",{textContent:s(u.levelText)},null,8,ts),t("td",{textContent:s(u.weekNumber)},null,8,es),t("td",{textContent:s(u.startDateHijri)},null,8,ns),t("td",{textContent:s(u.endDateHijri)},null,8,ss),t("td",os,[t("button",{type:"button",class:"primary-button p-0 px-2 me-2",onClick:V=>x(u)},is,8,as),t("button",{type:"button",onClick:V=>h(u),class:"button button-red p-0 px-2"},us,8,ds)])]))),128))]),_:1}),f(j,{meta:n(c).response.data.meta,onUpdateList:n(w)},null,8,["meta","onUpdateList"])],64)):(o(),i("div",Gn,Qn)),n(c).isProccessing&&n(c).response?(o(),i("div",cs,ps)):v("",!0)])]),_:1}),n(e).show?(o(),R(E,{key:0,onCloseModal:m[7]||(m[7]=u=>d()),class:T({"w-1000px":!0})},{default:$(()=>[t("div",_s,[t("form",{onSubmit:m[6]||(m[6]=W(u=>a(),["prevent"]))},[t("h6",{class:"h9 border-bottom pb-3 mb-4",textContent:s(n(l)("Week information"))},null,8,hs),t("div",vs,[f(P,{type:"select",searchable:!0,label:'<ion-icon name="bookmark"></ion-icon>',placeholder:"Semester",errors:n(e).errors.teacher_id,modelValue:n(e).data.semester_id,"onUpdate:modelValue":m[1]||(m[1]=u=>n(e).data.semester_id=u),options:n(C).list,required:!0},null,8,["errors","modelValue","options"]),f(P,{type:"select",searchable:!0,label:'<ion-icon name="school"></ion-icon>',placeholder:"Level",errors:n(e).errors.level,modelValue:n(e).data.level,"onUpdate:modelValue":m[2]||(m[2]=u=>n(e).data.level=u),options:{primary:n(l)("Primary"),middle:n(l)("Middle"),secondary:n(l)("Secondary")},required:!0},null,8,["errors","modelValue","options"]),f(P,{errors:n(e).errors.week_number,label:'<ion-icon name="bookmark"></ion-icon>',placeholder:"Week number",modelValue:n(e).data.week_number,"onUpdate:modelValue":m[3]||(m[3]=u=>n(e).data.week_number=u),required:!0},null,8,["errors","modelValue"]),f(P,{type:"date",errors:n(e).errors.start_date,label:'<ion-icon name="calendar"></ion-icon>',placeholder:"Week start date",modelValue:n(e).data.start_date,"onUpdate:modelValue":m[4]||(m[4]=u=>n(e).data.start_date=u),required:!0},null,8,["errors","modelValue"]),(o(!0),i(g,null,D(n(e).data.radios,(u,V)=>(o(),i("div",{class:"row mx-0 px-0",key:V},[f(P,{class:"col-md-3",label:'<ion-icon name="calendar"></ion-icon>',modelValue:n(l)(V),readonly:!0},null,8,["modelValue"]),f(P,{class:"col-md-9",errors:n(e).errors["radios."+V+".subject"],label:'<ion-icon name="bookmark"></ion-icon>',placeholder:"Subject",modelValue:u.subject,"onUpdate:modelValue":H=>u.subject=H,required:!0},null,8,["errors","modelValue","onUpdate:modelValue"])]))),128))]),t("div",ys,[t("button",{type:"submit",class:"primary-button",disabled:n(e).processing},s(n(e).processing?n(l)("Please wait"):n(e).update?n(l)("Update"):n(l)("Save")),9,bs),t("button",{type:"button",class:"secondary-button ms-2",onClick:m[5]||(m[5]=u=>d())},s(n(l)("Close")),1)])],32)])]),_:1})):v("",!0)],64))}},S=X({});S.component("subscriptions-component",St);S.component("subscription-payments-component",Ye);S.component("subscriptions-stats-by-plan-component",pn);S.component("chartjs-component",I);S.component("navbar-notifications-component",K);S.component("notifications-component",z);S.component("semesters-component",Nn);S.component("radio-weeks-component",Cs);S.provide("trans",q.translate);S.config.globalProperties.trans=q.translate;S.config.compilerOptions.isCustomElement=p=>p.startsWith("ion-icon");S.mount("#app");
